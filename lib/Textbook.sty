\ProvidesPackage{Textbook}

%
% Prerequisite Packages
%

\usepackage[explicit,calcwidth]{titlesec}  
\RequirePackage{lmodern}
\RequirePackage{tikz}
\usetikzlibrary{calc}
\RequirePackage{fancyhdr} 		  
\RequirePackage[most]{tcolorbox}  
\RequirePackage{color}
\usepackage[left=.8in,right=.8in,top=1in,bottom=1in]{geometry}

\definecolor{myblue}{RGB}{0,163,243}
\definecolor{titlebgdark}{RGB}{0,163,243}
\definecolor{titlebglight}{RGB}{191,233,251}
\definecolor{mydarkblue}{RGB}{0,30,180}




% Clickable TOC
\usepackage{color}   %May be necessary if you want to color links
\usepackage{hyperref}
\hypersetup{
    colorlinks=true, %set true if you want colored links
    linktoc=all,     %set to all if you want both sections and subsections linked
    linkcolor=black,  %choose some color if you want links to stand out
}

%

% Load other modules of this package
\usepackage{lib/Sections}
 

% Define colors, sampled from the books.
\definecolor{undergold}{HTML}{C9AD6A}	% e.g. used for titlerules
\definecolor{uppergold}{HTML}{B89A67}	%e.g. used for pagenumbers and footer


%Background
%\usepackage{background}
%\usepackage{ifoddpage}
%\backgroundsetup{
%scale=1,
%opacity=0.8,
%angle=0,
%color=black,
%contents={%
%   \includegraphics[width=\paperwidth]{lib/img/%PageBookBoarder.png}
%}
%}



% pages and right on odd pages
%\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\thechapter.\ #1}}{}}



\usetikzlibrary{calc}
\pagestyle{plain}

\newcounter{chapshift}
\addtocounter{chapshift}{-1}


\def\subsectiontitle{}
\renewcommand{\sectionmark}[1]{\markright{\sffamily\normalsize#1}{}}
\renewcommand{\subsectionmark}[1]{\def\subsectiontitle{#1}}


\usepackage{etoolbox,fancyhdr}

\pagestyle{fancy}

\renewcommand{\headrule}{{\color{myblue}%
\hrule width\headwidth height\headrulewidth depth\headrulewidth}}

\renewcommand{\chaptermark}[1]{\markboth{\sffamily\normalsize\bfseries \ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\sffamily\normalsize#1}{}}
\fancyhf{} \fancyhead[LE,RO]{\sffamily\normalsize\colorbox{myblue}{\color{white}\sffamily\bfseries\strut\quad\thepage\quad}}
\fancyhead[LO]{\textcolor{myblue} \rightmark}
\fancyhead[RE]{\textcolor{myblue}\leftmark}

\renewcommand{\headrulewidth}{.5pt}
\addtolength{\headheight}{2.5pt}
\newcommand{\footrulecolor}[1]{\patchcmd{\footrule}{\hrule}{\color{#1}\hrule}{}{}}
\renewcommand{\headrulewidth}{.5pt}
\addtolength{\headheight}{2.5pt}



\fancypagestyle{plain}{%
  \fancyhf{}%
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\makeatletter
\renewcommand{\cleardoublepage}{
\clearpage\ifodd\c@page\else
\hbox{}
\vspace*{\fill}
\thispagestyle{empty}

\fi}
\makeatother

